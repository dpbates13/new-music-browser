(this["webpackJsonpnew-music-browser"]=this["webpackJsonpnew-music-browser"]||[]).push([[0],{25:function(e,t,a){e.exports=a(37)},36:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(21),c=a.n(s),l=a(16),i=a.n(l),o=a(22),u=a(14),m=a(13),h=a(5),b=a(6),p=a(8),f=a(7),d=a(9),g=a(11),v=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return 0==this.props.loaded?r.a.createElement("header",{className:"loading",role:"banner"},r.a.createElement("h2",null,"Welcome to the Spotify New Music Browser"),r.a.createElement("p",null,"This website allows you to find albums released on Spotify that don't show up on Spotify's New Releases page. It also sorts them by genre, so that you don't have to waste time looking through music that doesn't interest you."),r.a.createElement("p",{class:"subGenreLoad"},"Please wait while data is loaded from Spotify...")):r.a.createElement("header",{className:"loading",role:"banner"},r.a.createElement("h2",null,"Welcome to the Spotify New Music Browser"),r.a.createElement("p",null,"This website allows you to find albums released on Spotify that don't show up on Spotify's New Releases page. It also sorts them by genre, so that you don't have to waste time looking through music that doesn't interest you."),r.a.createElement(g.b,{to:"/Main",className:"genreButton"},"Enter Site"))}}]),a}(n.Component);function E(e){return r.a.createElement("button",{name:e.genre,type:"button",onClick:e.selectGenre,className:"genreButton"},e.genre)}var y=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"albumElement"},r.a.createElement("img",{src:this.props.album.images[0].url,alt:"".concat(this.props.album.name," by ").concat(this.props.album.artists[0].name)}),r.a.createElement("a",{className:"album",href:this.props.album.uri},this.props.album.name),r.a.createElement("p",{className:"artist"},this.props.album.artists[0].name))}}]),a}(n.Component),G=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this)).state={selected:[],idsUsed:[]},n.input=r.a.createRef(),n}return Object(b.a)(a,[{key:"addIds",value:function(e){this.setState({idsUsed:[].concat(Object(m.a)(this.state.idsUsed),[e])})}},{key:"selectGenre",value:function(e){for(var t=new RegExp(e.replace("amp;","")),a=[],n=0;n<this.props.genreList.length;n++)this.props.genreList[n].search(t)>-1&&a.push(this.props.genreList[n]);this.setState({selected:a})}},{key:"render",value:function(){var e=this,t=[];return r.a.createElement("div",{className:"content"},r.a.createElement("h1",null,"Please select a genre below"),r.a.createElement("p",{className:"instructions"},"This will display albums associated with that genre, sorted by subgenre"),r.a.createElement("ul",{className:"keyGenres"},r.a.createElement(E,{genre:"hip hop",selectGenre:function(){return e.selectGenre("hip hop")}}),r.a.createElement(E,{genre:"r&b",selectGenre:function(){return e.selectGenre("r&b")}}),r.a.createElement(E,{genre:"pop",selectGenre:function(){return e.selectGenre("pop")}}),r.a.createElement(E,{genre:"dance",selectGenre:function(){return e.selectGenre("dance")}}),r.a.createElement(E,{genre:"edm",selectGenre:function(){return e.selectGenre("edm")}}),r.a.createElement(E,{genre:"electronic",selectGenre:function(){return e.selectGenre("electronic")}}),r.a.createElement(E,{genre:"trap",selectGenre:function(){return e.selectGenre("trap")}}),r.a.createElement(E,{genre:"rock",selectGenre:function(){return e.selectGenre("rock")}}),r.a.createElement(E,{genre:"metal",selectGenre:function(){return e.selectGenre("metal")}}),r.a.createElement(E,{genre:"punk",selectGenre:function(){return e.selectGenre("punk")}}),r.a.createElement(E,{genre:"folk",selectGenre:function(){return e.selectGenre("folk")}}),r.a.createElement(E,{genre:"country",selectGenre:function(){return e.selectGenre("country")}}),r.a.createElement(E,{genre:"reggaeton",selectGenre:function(){return e.selectGenre("reggaeton")}}),r.a.createElement(E,{genre:"latin",selectGenre:function(){return e.selectGenre("latin")}}),r.a.createElement(E,{genre:"classical",selectGenre:function(){return e.selectGenre("classical")}}),r.a.createElement(E,{genre:"alternative",selectGenre:function(){return e.selectGenre("alternative")}}),r.a.createElement(E,{genre:"indie",selectGenre:function(){return e.selectGenre("indie")}})),r.a.createElement("p",{className:"instructions"},"Or enter your own search term"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.selectGenre(e.input.current.value)},className:"keySearch"},r.a.createElement("input",{id:"text",type:"text",ref:this.input,"aria-label":"Genre Search"}),r.a.createElement("button",{type:"submit",className:"submit"},"Search Genres")),r.a.createElement("div",null,r.a.createElement("ul",{className:"subGenres"},this.state.selected.map((function(t){return r.a.createElement(E,{key:t,genre:t,selectGenre:function(){return e.selectGenre(t)}})})))),r.a.createElement("div",{className:"showAlbums"},this.state.selected.map((function(a){return r.a.createElement("div",{className:"genreDiv"},r.a.createElement("h1",null,a),r.a.createElement("div",{className:"albumElements"},e.props.albumDatabase.map((function(e){if(e.genres.includes(a)&&!t.includes(e.id))return t.push(e.id),r.a.createElement(y,{album:e})}))))}))))}}]),a}(n.Component),w=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={bearer:"",albumDatabase:[],artistDatabase:{},genreList:[],url:"https://api.spotify.com/v1/search?q=tag%3Anew&type=album&limit=50",loaded:0},e}return Object(b.a)(a,[{key:"getToken",value:function(){var e=this,t={grant_type:"client_credentials"};return new Promise((function(a,n){fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic NWYxNmE2ZjZjZTA2NDBmZTllNTVhNTQ5NTNiOGJlNzY6YWEzMmNhZTEzZjI3NGRjMGE1YWZlNWVmOTVmYWUzYmM="},body:new URLSearchParams(t)}).then((function(e){return e.json()})).then((function(t){var n="Bearer "+t.access_token;e.setState({bearer:n}),console.log(e.state.bearer),a()}))}))}},{key:"createAlbumDatabase",value:function(e){var t=this;return new Promise((function(a,n){return fetch(e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:t.state.bearer}}).then((function(e){200!==e.status&&(e.status,a(t.state.albumDatabase));var n=e.json();return console.log(n),n})).then((function(e){for(var n=0;n<e.albums.items.length;n++)null!=e.albums.items[n]&&t.setState({albumDatabase:[].concat(Object(m.a)(t.state.albumDatabase),[e.albums.items[n]])});"https://api.spotify.com/v1/search?query=tag%3Anew&type=album&offset=2000&limit=50"!==e.albums.next?(console.log(e.albums.next),a(t.createAlbumDatabase(e.albums.next))):a()}))}))}},{key:"createArtistStrings",value:function(e){var t=[],a="",n=0;console.log(e[0].artists[0].id);for(var r=0;r<e.length;r++)for(var s in e[r].artists)49===n?(a+="".concat(e[r].artists[s].id),t.push(a),a="",n=0):(a+="".concat(e[r].artists[s].id,","),n++);return console.log(t),t}},{key:"getArtists",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise((function(n,r){fetch("https://api.spotify.com/v1/artists?ids=".concat(e[a]),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:t.state.bearer}}).then((function(e){var t=e.json();return console.log(t),t})).then((function(r){for(var s=function(e){t.state.artistDatabase.hasOwnProperty("".concat(r.artists[e].name))||t.setState((function(t){var a=Object(u.a)({},t.artistDatabase);return a["".concat(r.artists[e].name)]=r.artists[e].genres,{artistDatabase:a}}))},c=0;c<r.artists.length;c++)s(c);++a<e.length?n(t.getArtists(e,a)):n()}))}))}},{key:"createGenreList",value:function(){for(var e in this.state.artistDatabase)for(var t=0;t<this.state.artistDatabase[e].length;t++)0==this.state.genreList.includes(this.state.artistDatabase[e][t])&&this.setState({genreList:[].concat(Object(m.a)(this.state.genreList),[this.state.artistDatabase[e][t]])})}},{key:"addGenreData",value:function(){var e=this;console.log(this.state.albumDatabase),console.log(this.state.albumDatabase[0].artists[0].name),console.log(this.state.artistDatabase);for(var t=function(t){e.setState((function(e){Object(u.a)({},e.albumDatabase)[t].genres=[]}))},a=0;a<this.state.albumDatabase.length;a++)t(a);for(var n=function(t){var a=function(a){e.setState((function(n){var r=Object(u.a)({},n.albumDatabase);for(var s in e.state.artistDatabase[e.state.albumDatabase[t].artists[a].name])r[t].genres.push(e.state.artistDatabase[e.state.albumDatabase[t].artists[a].name][s])}))};for(var n in e.state.albumDatabase[t].artists)a(n)},r=0;r<this.state.albumDatabase.length;r++)n(r)}},{key:"openSite",value:function(){this.setState({loaded:1})}},{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getToken();case 2:return console.log("yeah we goin"),e.next=5,this.createAlbumDatabase(this.state.url);case 5:return console.log(this.state.albumDatabase),e.next=8,this.getArtists(this.createArtistStrings(this.state.albumDatabase));case 8:this.addGenreData(),this.createGenreList(),this.openSite();case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("main",null,r.a.createElement(d.a,{path:"/",exact:!0,component:function(){return r.a.createElement(v,{loaded:e.state.loaded})}}),r.a.createElement(d.a,{path:"/Main",render:function(){return r.a.createElement(G,{albumDatabase:e.state.albumDatabase,genreList:e.state.genreList})}}))}}]),a}(n.Component);a(36);c.a.render(r.a.createElement(g.a,null,r.a.createElement(w,null)),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.6e525c01.chunk.js.map